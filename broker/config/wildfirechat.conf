#
#
# 本配置文件为debug使用，修改这里不会在Release包中生效。Release中包含的配置文件在 ${Porject_Path}/distribution/src/main/resources目录下
#
#



#*********************************************************************
# Server configuration
#*********************************************************************
#服务器的接入IP。给客户端提供是${server.ip}和${http_port}。
#客户端会从${http_port}端口获取到长链接端口。这个地址一定要改成客户端可以访问到的IP地址
# （如果您部署云服务器上或者具有独立公网出口的服务器上，请改为对应的公网IP；如果您部署在在内网环境下，在内网使用，这个地方改成内网地址）
server.ip 0.0.0.0

##原生客户端长链接端口
port 1885

##客户端短链接端口
http_port 8896

##WEB客户端长链接端口
websocket_port 8396

#管理端口
http.admin.port 18082

##节点ID，当集群部署时，一定不能有重复。
node_id 2

##绑定IP，保持不变即可
host 0.0.0.0

##本地绑定端口
local_port 8696

##是否使用内置DB。0使用mysql；1使用h2db；2使用mysql+mongodb。社区版只支持0和1，专业版支持2
embed.db 0

##服务器管理接口密钥
http.admin.secret_key Secret

zk_address 127.0.0.1:2181
##服务器API接口参数是否检查时间。当设置为false时，所有的请求会检查时间的有效性；当设置为true时，可以在http.admin.secret_key保持不变的情况下，使用固定的服务API签名
##nonce = "76616", timestamp = "1558350862502", sign = "b98f9b0717f59febccf1440067a7f50d9b31bdde"
##这个地方上线前要改为false
http.admin.no_check_time false

##客户端协议栈密钥，需要与客户端协议栈文件libemqq.cc文件中的aes_key值保持一致，16进制byte用逗号分割。这个密钥对安全性帮助不大，客户不要修改
client.proto.secret_key 0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x78,0x79,0x7A,0x7B,0x7C,0x7D,0x7E,0x7F

##用来生产im token的私钥，只在服务器使用，客户端不用。正式使用时为了安全一定要修改这个值，切记切记
token.key Secret

##token的过期时间，单位为毫秒，默认为无限期。如果需要设置无限期，客户端上一定需要加上token过期的处理。token过期的处理请参考文档的常见问题
##token.expire_time 2592000000

##首次登录，是否接收之前的历史消息。
##0 不接收历史消息，只接收5分钟以内的消息，由于服务器没有保存已经收取记录，所以如果有超过5分钟之前未收取的消息也不会收取下拉；
##1接收，会接收 message.max_queue 配置的条数的历史消息
message.roaming 0

##是否开启拉取远程历史消息。如果为1，客户端在会话内如果本地消息读取完了，可以下拉继续加载在服务器上的该会话的消息；如果为0则不能。
message.remote_history_message 1

##服务器为每个用户缓存的消息数量。这个值改得太大，拉取消息时间变长，另外会占用大量内存。
message.max_queue 1024

##是否禁止陌生人聊天
message.disable_stranger_chat false

##黑名单处理策略，0 发送失败，返回被拉黑的错误码；1 发送成功但消息被服务器直接丢弃；2 敏感词替换为***；3 不处理。
##所有命中敏感词的消息都会被记录在敏感词消息表中
message.blacklist.strategy 0

##是否禁止服务器端消息搜索，该功能暂未实现。目前的影响是如果打开，则存储消息时不单独保存_searchable_content字段
message.disable_remote_search  false

##禁止搜索用户
friend.disable_search false

##禁止按照昵称搜索用户。
friend.disable_nick_name_search false

##禁止发送好友邀请，通过server api添加好友不受此限制
friend.disable_friend_request false

##好友请求重复发送的间隔，单位是毫秒，默认是7天，0为不限制
friend.repeat_request_duration 604800000

##好友请求被拒绝后再次发送的间隔，单位是毫秒，默认是30天，0为不限制
friend.reject_request_duration 2592000000

##好友请求过期时间，单位是毫秒，默认是7天，0为不限制
friend.request_expiration_duration 604800000

## 聊天室观众空闲退出时间，单位为毫秒，默认为15分钟，0为永远不退出
chatroom.participant_idle_time 900000

## 用户向聊天室发送消息，自动加入聊天室
chatroom.rejoin_when_active true

#*********************************************************************
# hazelcase configuration
#*********************************************************************
hazelcast.configuration config/hazelcast.xml
intercept.handler io.moquette.interception.HazelcastInterceptHandler
intercept.connection.handler io.moquette.interception.ConnectionInterceptHandler
#*********************************************************************
# Media server configuration
#*********************************************************************
media.server.use_qiniu 0

##媒体类型分类
#Media_Type_GENERAL = 0,
#Media_Type_IMAGE = 1,
#Media_Type_VOICE = 2,
#Media_Type_VIDEO = 3,
#Media_Type_FILE = 4,
#Media_Type_PORTRAIT = 5,
#Media_Type_FAVORITE = 6


# local media server configuration
# 本地媒体服务器配置。
local.media.storage.root media

# 是否支持多端登陆
server.multi_endpoint true

# 多平台连接状态通知（仅当multi_endpoint为false时有效）
server.multi_platform_notification false

#*********************************************************************
# Push server configuration
#*********************************************************************
##安卓推送服务器地址
push.android.server.address http://localhost:8085/android/push
##苹果推送服务器地址
push.ios.server.address http://localhost:8085/ios/push

#*********************************************************************
# User online status event callback
#*********************************************************************
##用户在线状态事件回调地址
#user.online_status_callback http://localhost:8888/user/online_event

#mongodb.client_uri mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]
#mongodb.client_uri mongodb://host1:27017,host2:27017,host3:27017/wfchat?replicaSet=myReplicaSet
mongodb.client_uri mongodb://wfc:123456@localhost:27017/wfchat
mongodb.database wfchat
#仅在第一次启动时会设置消息数据的过期时间，如果之后再修改将不生效。
#如果需要修改过期时间，请修改t_messages_x和t_user_message_x的索引过期时间，修改方法请行百度
mongodb.data_expire_days 1096

#*********************************************************************
# Sensitive configuration
#*********************************************************************
##文本敏感词过滤处理方法，0 发送失败；1 发送成功但消息被服务器直接丢弃；2 命中的敏感词被替换成***；3 记录并继续发送
sensitive.filter.type 0

#*********************************************************************
# Message forward configuration
#*********************************************************************
message.notify.url http:xxxx

message.review.url http:xxxx
cloud.profile.url http:xxx

##设备信息转发地址
#things_message.forward.url http://localhost:8087/device/forward
